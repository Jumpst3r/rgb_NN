/*------------------------------------------------------------------------------------------------
This file was automatically generated by NeuralNetwork
Gen time: 27.05.2017 at 16:14:19. Use -lm flag when compiling to get access to the exp() function from math.h
This function returns an array of doubles indicating the probability of each color (same order as the)
training data set (eg: r,g,b,v,c)
--------------------------------------------------------------------------------------------------*/


#include <math.h>
double hiddenOut1[11];
double hiddenOut2[11];
double out[8];
double hl1WeightMatrix1[10][4] = {{-3.2890073917098808,1.6329537805122307,-2.0037856198579056,1.903559727790389},{-2.762688095462131,3.1179917970000646,-4.339236644517581,1.443552365618482},{-0.47358477773509394,4.582429065077717,-5.469147600979134,0.2268204593012545},{4.422879116425613,7.820110059837855,-11.695802583882795,-0.19743970645590073},{-4.5153550388683135,7.454145191107888,-3.4423384655079925,1.1584494695605871},{-7.984641085671858,6.757561772548355,1.9459659822578912,1.370371957816543},{0.12000885706544631,11.65462219830487,-9.832570094861293,0.2359017942774664},{-5.028893669797323,11.296298870012762,-6.98397006555368,0.924761309654132},{-11.186129450022266,8.850024964402365,2.7215659463018156,2.0906575155603644},{-13.44908774519968,9.469454628577878,1.8060555202481419,3.412980000798806}};
double hl2WeightMatrix1[10][11] = {{-1.0124426537794522,-1.692017077211148,-1.5695204327891272,-2.1226010969775704,1.59376244934311,2.189159796157436,-2.7573185834994667,-0.7288502678591362,-0.09829200800589881,0.6161179296063825,-1.2875562428090785},{-0.9573226126288726,-2.9029063625152016,-1.8829145085557826,-4.129997885922569,1.6853204593643047,1.8509496151075173,-4.446875215863442,-0.9320934205805298,0.42115048155962675,0.9033529365254876,-3.0323118502433273},{-0.601155658777358,-0.9107810582274726,-1.1875546126901333,-5.160985854308058,0.3468437148312137,0.6513702012204569,-5.771862315893704,-3.0387775805702577,-0.6547837522840488,-0.4061753156559081,-3.7493924444092834},{-0.49197710006605433,-1.1329511202876483,-1.164094357938051,-6.474117930207133,-0.16831593259794508,0.7056034470126648,-6.0823286550356,-3.0273870206815454,-0.7714015072885794,-0.6978424289920349,-4.310104428885989},{-0.46783072754479754,0.15762322800856457,-0.538632117589133,-3.207618770384537,0.31605390568012215,1.1381316363481038,-5.772689126445357,-3.352144008171472,-1.5583101643460107,-1.7060305547546017,-5.079946254416748},{-0.1020799910200638,-0.12521780425317747,-0.8067279012617942,-3.5043898164710705,0.47870430041562423,1.4340342498447907,-5.463069250454344,-2.7413637565462006,-1.7496709314279895,-2.2297701882454053,-6.066972074938188},{-0.5652335455212413,-0.13382950839536978,-1.1954304218387508,-3.2440782161490316,0.8242502420402443,1.3776303804953978,-4.504639554418511,-1.9405835144219048,-1.6581199996362022,-2.7522504201933726,-5.675454099467813},{-0.9239649876721673,-0.8848145194695385,0.11290905966713377,0.08033108088977069,-0.5011137240727256,-1.4253313152192657,0.2629791133602204,-1.7474201281621315,-2.7315272970216524,-4.0399145618400265,-6.099105918116099},{-1.4061469403541396,-0.5083397905692478,-0.3246213880729612,-0.18136750119294767,-1.2923067044339824,-3.074456994142135,0.46706498872828617,-1.435086753392972,-2.287061772745774,-3.8022451240196755,-5.405471946172144},{-1.6654906097210826,-1.5882964134205328,-1.5989480550613728,-0.9104074540073429,-3.9566138112349765,-4.297071816743906,-1.364247338354274,-2.571026521489052,-1.99950109049379,-2.8956374875261033,-5.10181405176627}};
double outWeightMatrix1[8][11] = {{-1.2118274847222557,-0.8346063554146127,-0.46421362604023697,-1.1349800396024365,3.234509024952866,2.776379508971885,1.5098043065481348,0.06006058725959602,1.3262270715521502,5.6606762162381665,3.962097842559793},{-0.7707652725989449,-3.31853376982143,-1.2021601604398373,-1.3487664499263967,-2.0016704124019387,-1.433081391634213,-2.3505812955011467,-3.096667502689781,-3.867173404135602,-0.3488405412448339,-8.36842378507813},{2.786740837378547,3.5212018784164636,4.082312987243086,4.428162877995742,1.0167095614009174,0.4887959263960795,-1.498628401189802,-1.959234065701345,-3.023524965556493,-0.6644796519511658,0.23471315133115622},{0.34195026190999045,3.6967097598806014,4.763589125561753,4.451681657223761,0.5465674866118263,-0.3188100231690334,-0.37258888529765977,0.02828203714457712,1.315237212572502,4.703578460696839,5.026585129879644},{3.7849386237355795,4.036781262298465,-1.4873342684491635,-1.43312642789383,-2.252401899516469,-1.935688048113835,-2.3675144160475723,-2.7023322186551053,-1.812448661789989,-0.505340841208082,-2.518526490245204},{0.8887219312926337,0.4249988005492109,-0.5287791405390769,-0.5795503560560321,2.886518936464742,2.3846784328909396,2.8758521639683376,2.349396136250605,-1.3978077294380733,-5.593147029429384,-0.003640949687916557},{-2.9311467763645274,-3.900766280267164,-2.8673821457584108,-1.9260200707516322,-1.7251991335715993,-1.7716432116174,1.4143660472023816,1.8168484263984321,2.9854511784207367,4.975050098818269,1.9355948301697012},{-2.548060447883491,-3.2382654915348024,-2.032042207525636,-1.990792079952599,-1.0392423218519813,-1.1244479170941606,0.4960278356693328,3.320524086239114,3.6363153366614585,-7.219677549770185,-0.04579698033878032}};
double* query(double r, double g, double b);
double* query(double r, double g, double b){
    r = 2 * (r / 255.) - 1;
    g = 2 * (g / 255.) - 1;
    b = 2 * (b / 255.) - 1;

    double sum = 0;
    int i = 0;
    int j = 0;
    int n = 0;
    double inputs[4] = {r,g,b,-1};

    for(i = 0; i < 11; i++){
        sum = 0;
        for(j = 0; j < 4; j++){
            sum += inputs[j] * hl1WeightMatrix1[i][j];
        }
        hiddenOut1[i] = 1. / (1 + exp(-sum));
    }

    hiddenOut1[11 - 1] = -1;
    for(i = 0; i < 11-1;i++){
        sum = 0;
        for(j = 0; j < 11; j++){
            sum += hiddenOut1[j] * hl2WeightMatrix1[i][j];
        }
        hiddenOut2[i] = 1. / (1 + exp(-sum));
    }hiddenOut2[11-1] = -1 ;
    double weightedInput[8];
    double softmaxsum = 0;
    for(i = 0; i < 8; i++){
        sum = 0;
        for(j = 0; j < 11; j++){
            sum += hiddenOut2[j] * outWeightMatrix1[i][j];
        }
        weightedInput[i] = sum;
        softmaxsum += exp(weightedInput[i]);
    }
    for(n = 0; n < 8; n++){
        out[n] = exp(weightedInput[n]) / softmaxsum;
        out[n] = roundf(out[n] * 100) / 100;
    }
    return out;
}